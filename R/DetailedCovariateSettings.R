# Copyright 2017 Observational Health Data Sciences and Informatics
#
# This file is part of FeatureExtraction
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# This file has been autogenerated. Do not change by hand.

#' Create detailed covariate settings
#'
#' @details
#' creates an object specifying in detail how covariates should be contructed from data in the CDM
#' model. Warning: this function is for advanced users only.
#'
#' @param analyses   A list of \code{analysisDetail} objects as created using
#'                   \code{\link{createAnalysisDetails}}.
#'
#' @return
#' An object of type \code{covariateSettings}, to be used in other functions.
#'
#' @export
createDetailedCovariateSettings <- function(analyses = list()) {
  covariateSettings <- list(temporal = FALSE, analyses = analyses)
  attr(covariateSettings, "fun") <- "getDbDefaultCovariateData"
  class(covariateSettings) <- "covariateSettings"
  return(covariateSettings)

}

#' Create detailed temporal covariate settings
#'
#' @details
#' creates an object specifying in detail how temporal covariates should be contructed from data in
#' the CDM model. Warning: this function is for advanced users only.
#'
#' @param analyses            A list of analysis detail objects as created using
#'                            \code{\link{createAnalysisDetails}}.
#' @param temporalStartDays   A list of integers representing the start of a time period, relative to
#'                            the index date. 0 indicates the index date, -1 indicates the day before
#'                            the index date, etc. The start day is included in the time period.
#' @param temporalEndDays     A list of integers representing the end of a time period, relative to the
#'                            index date. 0 indicates the index date, -1 indicates the day before the
#'                            index date, etc. The end day is included in the time period.
#'
#' @return
#' An object of type \code{covariateSettings}, to be used in other functions.
#'
#' @export
createDetailedTemporalCovariateSettings <- function(analyses = list(),
                                                    temporalStartDays = c(-365,
                                                                          -364,
                                                                          -363,
                                                                          -362,
                                                                          -361,
                                                                          -360,
                                                                          -359,
                                                                          -358,
                                                                          -357,
                                                                          -356,
                                                                          -355,
                                                                          -354,
                                                                          -353,
                                                                          -352,
                                                                          -351,
                                                                          -350,
                                                                          -349,
                                                                          -348,
                                                                          -347,
                                                                          -346,
                                                                          -345,
                                                                          -344,
                                                                          -343,
                                                                          -342,
                                                                          -341,
                                                                          -340,
                                                                          -339,
                                                                          -338,
                                                                          -337,
                                                                          -336,
                                                                          -335,
                                                                          -334,
                                                                          -333,
                                                                          -332,
                                                                          -331,
                                                                          -330,
                                                                          -329,
                                                                          -328,
                                                                          -327,
                                                                          -326,
                                                                          -325,
                                                                          -324,
                                                                          -323,
                                                                          -322,
                                                                          -321,
                                                                          -320,
                                                                          -319,
                                                                          -318,
                                                                          -317,
                                                                          -316,
                                                                          -315,
                                                                          -314,
                                                                          -313,
                                                                          -312,
                                                                          -311,
                                                                          -310,
                                                                          -309,
                                                                          -308,
                                                                          -307,
                                                                          -306,
                                                                          -305,
                                                                          -304,
                                                                          -303,
                                                                          -302,
                                                                          -301,
                                                                          -300,
                                                                          -299,
                                                                          -298,
                                                                          -297,
                                                                          -296,
                                                                          -295,
                                                                          -294,
                                                                          -293,
                                                                          -292,
                                                                          -291,
                                                                          -290,
                                                                          -289,
                                                                          -288,
                                                                          -287,
                                                                          -286,
                                                                          -285,
                                                                          -284,
                                                                          -283,
                                                                          -282,
                                                                          -281,
                                                                          -280,
                                                                          -279,
                                                                          -278,
                                                                          -277,
                                                                          -276,
                                                                          -275,
                                                                          -274,
                                                                          -273,
                                                                          -272,
                                                                          -271,
                                                                          -270,
                                                                          -269,
                                                                          -268,
                                                                          -267,
                                                                          -266,
                                                                          -265,
                                                                          -264,
                                                                          -263,
                                                                          -262,
                                                                          -261,
                                                                          -260,
                                                                          -259,
                                                                          -258,
                                                                          -257,
                                                                          -256,
                                                                          -255,
                                                                          -254,
                                                                          -253,
                                                                          -252,
                                                                          -251,
                                                                          -250,
                                                                          -249,
                                                                          -248,
                                                                          -247,
                                                                          -246,
                                                                          -245,
                                                                          -244,
                                                                          -243,
                                                                          -242,
                                                                          -241,
                                                                          -240,
                                                                          -239,
                                                                          -238,
                                                                          -237,
                                                                          -236,
                                                                          -235,
                                                                          -234,
                                                                          -233,
                                                                          -232,
                                                                          -231,
                                                                          -230,
                                                                          -229,
                                                                          -228,
                                                                          -227,
                                                                          -226,
                                                                          -225,
                                                                          -224,
                                                                          -223,
                                                                          -222,
                                                                          -221,
                                                                          -220,
                                                                          -219,
                                                                          -218,
                                                                          -217,
                                                                          -216,
                                                                          -215,
                                                                          -214,
                                                                          -213,
                                                                          -212,
                                                                          -211,
                                                                          -210,
                                                                          -209,
                                                                          -208,
                                                                          -207,
                                                                          -206,
                                                                          -205,
                                                                          -204,
                                                                          -203,
                                                                          -202,
                                                                          -201,
                                                                          -200,
                                                                          -199,
                                                                          -198,
                                                                          -197,
                                                                          -196,
                                                                          -195,
                                                                          -194,
                                                                          -193,
                                                                          -192,
                                                                          -191,
                                                                          -190,
                                                                          -189,
                                                                          -188,
                                                                          -187,
                                                                          -186,
                                                                          -185,
                                                                          -184,
                                                                          -183,
                                                                          -182,
                                                                          -181,
                                                                          -180,
                                                                          -179,
                                                                          -178,
                                                                          -177,
                                                                          -176,
                                                                          -175,
                                                                          -174,
                                                                          -173,
                                                                          -172,
                                                                          -171,
                                                                          -170,
                                                                          -169,
                                                                          -168,
                                                                          -167,
                                                                          -166,
                                                                          -165,
                                                                          -164,
                                                                          -163,
                                                                          -162,
                                                                          -161,
                                                                          -160,
                                                                          -159,
                                                                          -158,
                                                                          -157,
                                                                          -156,
                                                                          -155,
                                                                          -154,
                                                                          -153,
                                                                          -152,
                                                                          -151,
                                                                          -150,
                                                                          -149,
                                                                          -148,
                                                                          -147,
                                                                          -146,
                                                                          -145,
                                                                          -144,
                                                                          -143,
                                                                          -142,
                                                                          -141,
                                                                          -140,
                                                                          -139,
                                                                          -138,
                                                                          -137,
                                                                          -136,
                                                                          -135,
                                                                          -134,
                                                                          -133,
                                                                          -132,
                                                                          -131,
                                                                          -130,
                                                                          -129,
                                                                          -128,
                                                                          -127,
                                                                          -126,
                                                                          -125,
                                                                          -124,
                                                                          -123,
                                                                          -122,
                                                                          -121,
                                                                          -120,
                                                                          -119,
                                                                          -118,
                                                                          -117,
                                                                          -116,
                                                                          -115,
                                                                          -114,
                                                                          -113,
                                                                          -112,
                                                                          -111,
                                                                          -110,
                                                                          -109,
                                                                          -108,
                                                                          -107,
                                                                          -106,
                                                                          -105,
                                                                          -104,
                                                                          -103,
                                                                          -102,
                                                                          -101,
                                                                          -100,
                                                                          -99,
                                                                          -98,
                                                                          -97,
                                                                          -96,
                                                                          -95,
                                                                          -94,
                                                                          -93,
                                                                          -92,
                                                                          -91,
                                                                          -90,
                                                                          -89,
                                                                          -88,
                                                                          -87,
                                                                          -86,
                                                                          -85,
                                                                          -84,
                                                                          -83,
                                                                          -82,
                                                                          -81,
                                                                          -80,
                                                                          -79,
                                                                          -78,
                                                                          -77,
                                                                          -76,
                                                                          -75,
                                                                          -74,
                                                                          -73,
                                                                          -72,
                                                                          -71,
                                                                          -70,
                                                                          -69,
                                                                          -68,
                                                                          -67,
                                                                          -66,
                                                                          -65,
                                                                          -64,
                                                                          -63,
                                                                          -62,
                                                                          -61,
                                                                          -60,
                                                                          -59,
                                                                          -58,
                                                                          -57,
                                                                          -56,
                                                                          -55,
                                                                          -54,
                                                                          -53,
                                                                          -52,
                                                                          -51,
                                                                          -50,
                                                                          -49,
                                                                          -48,
                                                                          -47,
                                                                          -46,
                                                                          -45,
                                                                          -44,
                                                                          -43,
                                                                          -42,
                                                                          -41,
                                                                          -40,
                                                                          -39,
                                                                          -38,
                                                                          -37,
                                                                          -36,
                                                                          -35,
                                                                          -34,
                                                                          -33,
                                                                          -32,
                                                                          -31,
                                                                          -30,
                                                                          -29,
                                                                          -28,
                                                                          -27,
                                                                          -26,
                                                                          -25,
                                                                          -24,
                                                                          -23,
                                                                          -22,
                                                                          -21,
                                                                          -20,
                                                                          -19,
                                                                          -18,
                                                                          -17,
                                                                          -16,
                                                                          -15,
                                                                          -14,
                                                                          -13,
                                                                          -12,
                                                                          -11,
                                                                          -10,
                                                                          -9,
                                                                          -8,
                                                                          -7,
                                                                          -6,
                                                                          -5,
                                                                          -4,
                                                                          -3,
                                                                          -2,
                                                                          -1),
                                                    temporalEndDays = c(-365,
                                                                        -364,
                                                                        -363,
                                                                        -362,
                                                                        -361,
                                                                        -360,
                                                                        -359,
                                                                        -358,
                                                                        -357,
                                                                        -356,
                                                                        -355,
                                                                        -354,
                                                                        -353,
                                                                        -352,
                                                                        -351,
                                                                        -350,
                                                                        -349,
                                                                        -348,
                                                                        -347,
                                                                        -346,
                                                                        -345,
                                                                        -344,
                                                                        -343,
                                                                        -342,
                                                                        -341,
                                                                        -340,
                                                                        -339,
                                                                        -338,
                                                                        -337,
                                                                        -336,
                                                                        -335,
                                                                        -334,
                                                                        -333,
                                                                        -332,
                                                                        -331,
                                                                        -330,
                                                                        -329,
                                                                        -328,
                                                                        -327,
                                                                        -326,
                                                                        -325,
                                                                        -324,
                                                                        -323,
                                                                        -322,
                                                                        -321,
                                                                        -320,
                                                                        -319,
                                                                        -318,
                                                                        -317,
                                                                        -316,
                                                                        -315,
                                                                        -314,
                                                                        -313,
                                                                        -312,
                                                                        -311,
                                                                        -310,
                                                                        -309,
                                                                        -308,
                                                                        -307,
                                                                        -306,
                                                                        -305,
                                                                        -304,
                                                                        -303,
                                                                        -302,
                                                                        -301,
                                                                        -300,
                                                                        -299,
                                                                        -298,
                                                                        -297,
                                                                        -296,
                                                                        -295,
                                                                        -294,
                                                                        -293,
                                                                        -292,
                                                                        -291,
                                                                        -290,
                                                                        -289,
                                                                        -288,
                                                                        -287,
                                                                        -286,
                                                                        -285,
                                                                        -284,
                                                                        -283,
                                                                        -282,
                                                                        -281,
                                                                        -280,
                                                                        -279,
                                                                        -278,
                                                                        -277,
                                                                        -276,
                                                                        -275,
                                                                        -274,
                                                                        -273,
                                                                        -272,
                                                                        -271,
                                                                        -270,
                                                                        -269,
                                                                        -268,
                                                                        -267,
                                                                        -266,
                                                                        -265,
                                                                        -264,
                                                                        -263,
                                                                        -262,
                                                                        -261,
                                                                        -260,
                                                                        -259,
                                                                        -258,
                                                                        -257,
                                                                        -256,
                                                                        -255,
                                                                        -254,
                                                                        -253,
                                                                        -252,
                                                                        -251,
                                                                        -250,
                                                                        -249,
                                                                        -248,
                                                                        -247,
                                                                        -246,
                                                                        -245,
                                                                        -244,
                                                                        -243,
                                                                        -242,
                                                                        -241,
                                                                        -240,
                                                                        -239,
                                                                        -238,
                                                                        -237,
                                                                        -236,
                                                                        -235,
                                                                        -234,
                                                                        -233,
                                                                        -232,
                                                                        -231,
                                                                        -230,
                                                                        -229,
                                                                        -228,
                                                                        -227,
                                                                        -226,
                                                                        -225,
                                                                        -224,
                                                                        -223,
                                                                        -222,
                                                                        -221,
                                                                        -220,
                                                                        -219,
                                                                        -218,
                                                                        -217,
                                                                        -216,
                                                                        -215,
                                                                        -214,
                                                                        -213,
                                                                        -212,
                                                                        -211,
                                                                        -210,
                                                                        -209,
                                                                        -208,
                                                                        -207,
                                                                        -206,
                                                                        -205,
                                                                        -204,
                                                                        -203,
                                                                        -202,
                                                                        -201,
                                                                        -200,
                                                                        -199,
                                                                        -198,
                                                                        -197,
                                                                        -196,
                                                                        -195,
                                                                        -194,
                                                                        -193,
                                                                        -192,
                                                                        -191,
                                                                        -190,
                                                                        -189,
                                                                        -188,
                                                                        -187,
                                                                        -186,
                                                                        -185,
                                                                        -184,
                                                                        -183,
                                                                        -182,
                                                                        -181,
                                                                        -180,
                                                                        -179,
                                                                        -178,
                                                                        -177,
                                                                        -176,
                                                                        -175,
                                                                        -174,
                                                                        -173,
                                                                        -172,
                                                                        -171,
                                                                        -170,
                                                                        -169,
                                                                        -168,
                                                                        -167,
                                                                        -166,
                                                                        -165,
                                                                        -164,
                                                                        -163,
                                                                        -162,
                                                                        -161,
                                                                        -160,
                                                                        -159,
                                                                        -158,
                                                                        -157,
                                                                        -156,
                                                                        -155,
                                                                        -154,
                                                                        -153,
                                                                        -152,
                                                                        -151,
                                                                        -150,
                                                                        -149,
                                                                        -148,
                                                                        -147,
                                                                        -146,
                                                                        -145,
                                                                        -144,
                                                                        -143,
                                                                        -142,
                                                                        -141,
                                                                        -140,
                                                                        -139,
                                                                        -138,
                                                                        -137,
                                                                        -136,
                                                                        -135,
                                                                        -134,
                                                                        -133,
                                                                        -132,
                                                                        -131,
                                                                        -130,
                                                                        -129,
                                                                        -128,
                                                                        -127,
                                                                        -126,
                                                                        -125,
                                                                        -124,
                                                                        -123,
                                                                        -122,
                                                                        -121,
                                                                        -120,
                                                                        -119,
                                                                        -118,
                                                                        -117,
                                                                        -116,
                                                                        -115,
                                                                        -114,
                                                                        -113,
                                                                        -112,
                                                                        -111,
                                                                        -110,
                                                                        -109,
                                                                        -108,
                                                                        -107,
                                                                        -106,
                                                                        -105,
                                                                        -104,
                                                                        -103,
                                                                        -102,
                                                                        -101,
                                                                        -100,
                                                                        -99,
                                                                        -98,
                                                                        -97,
                                                                        -96,
                                                                        -95,
                                                                        -94,
                                                                        -93,
                                                                        -92,
                                                                        -91,
                                                                        -90,
                                                                        -89,
                                                                        -88,
                                                                        -87,
                                                                        -86,
                                                                        -85,
                                                                        -84,
                                                                        -83,
                                                                        -82,
                                                                        -81,
                                                                        -80,
                                                                        -79,
                                                                        -78,
                                                                        -77,
                                                                        -76,
                                                                        -75,
                                                                        -74,
                                                                        -73,
                                                                        -72,
                                                                        -71,
                                                                        -70,
                                                                        -69,
                                                                        -68,
                                                                        -67,
                                                                        -66,
                                                                        -65,
                                                                        -64,
                                                                        -63,
                                                                        -62,
                                                                        -61,
                                                                        -60,
                                                                        -59,
                                                                        -58,
                                                                        -57,
                                                                        -56,
                                                                        -55,
                                                                        -54,
                                                                        -53,
                                                                        -52,
                                                                        -51,
                                                                        -50,
                                                                        -49,
                                                                        -48,
                                                                        -47,
                                                                        -46,
                                                                        -45,
                                                                        -44,
                                                                        -43,
                                                                        -42,
                                                                        -41,
                                                                        -40,
                                                                        -39,
                                                                        -38,
                                                                        -37,
                                                                        -36,
                                                                        -35,
                                                                        -34,
                                                                        -33,
                                                                        -32,
                                                                        -31,
                                                                        -30,
                                                                        -29,
                                                                        -28,
                                                                        -27,
                                                                        -26,
                                                                        -25,
                                                                        -24,
                                                                        -23,
                                                                        -22,
                                                                        -21,
                                                                        -20,
                                                                        -19,
                                                                        -18,
                                                                        -17,
                                                                        -16,
                                                                        -15,
                                                                        -14,
                                                                        -13,
                                                                        -12,
                                                                        -11,
                                                                        -10,
                                                                        -9,
                                                                        -8,
                                                                        -7,
                                                                        -6,
                                                                        -5,
                                                                        -4,
                                                                        -3,
                                                                        -2,
                                                                        -1)) {
  covariateSettings <- list(temporal = TRUE)
  formalNames <- names(formals(createDetailedTemporalCovariateSettings))
  for (name in formalNames) {
    covariateSettings[[name]] <- get(name)
  }
  attr(covariateSettings, "fun") <- "getDbDefaultCovariateData"
  class(covariateSettings) <- "covariateSettings"
  return(covariateSettings)
}

#' Create detailed covariate settings
#'
#' @details
#' creates an object specifying in detail how covariates should be contructed from data in the CDM
#' model. Warning: this function is for advanced users only.
#'
#' @param analysisId                    An integer between 0 and 999 that uniquely identifies this
#'                                      analysis.
#' @param sqFileName                    The name of the paramterized SQL file embedded in the
#'                                      \code{featureExtraction} package.
#' @param parameters                    The list of parameter values used to render the template SQL.
#' @param includedCovariateConceptIds   A list of concept IDs that should be used to construct
#'                                      covariates.
#' @param addDescendantsToInclude       Should descendant concept IDs be added to the list of concepts
#'                                      to include?
#' @param excludedCovariateConceptIds   A list of concept IDs that should NOT be used to construct
#'                                      covariates.
#' @param addDescendantsToExclude       Should descendant concept IDs be added to the list of concepts
#'                                      to exclude?
#' @param includedCovariateIds          A list of covariate IDs that should be restricted to.
#'
#' @return
#' An object of type \code{analysisDetail}, to be used in
#' \code{\link{createDetailedCovariateSettings}} or
#' \code{\link{createDetailedTemporalCovariateSettings}}.
#'
#' @examples
#' analysisDetails <- createAnalysisDetails(analysisId = 1,
#'                                          sqlFileName = "DemographicsGender.sql",
#'                                          parameters = list(analysisId = 1,
#'                                                            analysisName = "Gender",
#'                                                            domainId = "Demographics"),
#'                                          includedCovariateConceptIds = c(),
#'                                          addDescendantsToInclude = FALSE,
#'                                          excludedCovariateConceptIds = c(),
#'                                          addDescendantsToExclude = FALSE,
#'                                          includedCovariateIds = c())
#'
#'
#' @export
createAnalysisDetails <- function(analysisId,
                                  sqlFileName,
                                  parameters,
                                  includedCovariateConceptIds = c(),
                                  addDescendantsToInclude = FALSE,
                                  excludedCovariateConceptIds = c(),
                                  addDescendantsToExclude = FALSE,
                                  includedCovariateIds = c()) {
  analysisDetail <- list()
  formalNames <- names(formals(createAnalysisDetails))
  for (name in formalNames) {
    value <- get(name)
    if (is.null(value)) {
      value <- vector()
    }
    analysisDetail[[name]] <- value
  }
  class(analysisDetail) <- "analysisDetail"
  return(analysisDetail)
}

#' Convert prespecified covariate settings into detailed covariate settings
#'
#' @details
#' For advanced users only.
#'
#' @param covariateSettings   An object of type \code{covariateSettings} as created for example by the
#'                            \code{\link{createCovariateSettings}} function.
#'
#' @return
#' An object of type \code{covariateSettings}, to be used in other functions.
#'
#' @export
convertPrespecSettingsToDetailedSettings <- function(covariateSettings) {
  json <- .toJson(covariateSettings)
  rJava::J("org.ohdsi.featureExtraction.FeatureExtraction")$init(system.file("", package = "FeatureExtraction"))
  newJson <- rJava::J("org.ohdsi.featureExtraction.FeatureExtraction")$convertSettingsPrespecToDetails(json)
  detailedCovariateSettings <- .fromJson(newJson)
  attr(detailedCovariateSettings, "fun") <- "getDbDefaultCovariateData"
  class(detailedCovariateSettings) <- "covariateSettings"
  return(detailedCovariateSettings)
}

#' Create default covariate settings
#'
#' @return
#' An object of type \code{covariateSettings}, to be used in other functions.
#'
#' @export
createDefaultCovariateSettings <- function() {
  rJava::J("org.ohdsi.featureExtraction.FeatureExtraction")$init(system.file("", package = "FeatureExtraction"))
  newJson <- rJava::J("org.ohdsi.featureExtraction.FeatureExtraction")$getDefaultPrespecAnalyses()
  cvariateSettings <- .fromJson(newJson)
  attr(cvariateSettings, "fun") <- "getDbDefaultCovariateData"
  class(cvariateSettings) <- "covariateSettings"
  return(cvariateSettings)
}

#' Create default covariate settings
#'
#' @return
#' An object of type \code{covariateSettings}, to be used in other functions.
#'
#' @export
createDefaultTemporalCovariateSettings <- function() {
  rJava::J("org.ohdsi.featureExtraction.FeatureExtraction")$init(system.file("", package = "FeatureExtraction"))
  newJson <- rJava::J("org.ohdsi.featureExtraction.FeatureExtraction")$getDefaultTemporalPrespecAnalyses()
  cvariateSettings <- .fromJson(newJson)
  attr(cvariateSettings, "fun") <- "getDbDefaultCovariateData"
  class(cvariateSettings) <- "covariateSettings"
  return(cvariateSettings)
}
