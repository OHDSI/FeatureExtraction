<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Getcovariate information from the database through the cohort_attribute table — getDbCohortAttrCovariatesData • FeatureExtraction</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Getcovariate information from the database through the cohort_attribute table — getDbCohortAttrCovariatesData"><meta property="og:description" content="Constructs covariates using the cohort_attribute table."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">FeatureExtraction</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.7.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/CreatingCovariatesBasedOnOtherCohorts.html">Creating covariates based on other cohorts</a>
    </li>
    <li>
      <a href="../articles/CreatingCovariatesUsingCohortAttributes.html">Creating covariates using cohort attributes</a>
    </li>
    <li>
      <a href="../articles/CreatingCustomCovariateBuilders.html">Creating custom covariate builders</a>
    </li>
    <li>
      <a href="../articles/CreatingCustomCovariateBuildersKorean.html">Creating custom covariate builders (Korean)</a>
    </li>
    <li>
      <a href="../articles/UsingFeatureExtraction.html">Using FeatureExtraction</a>
    </li>
    <li>
      <a href="../articles/UsingFeatureExtractionKorean.html">Using FeatureExtraction (Korean)</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://ohdsi.github.io/Hades" class="external-link"><img src='https://ohdsi.github.io/Hades/images/hadesMini.png' width=80 height=17 style='vertical-align: top;'></a>
</li>
<li>
  <a href="https://github.com/OHDSI/FeatureExtraction/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Getcovariate information from the database through the cohort_attribute table</h1>
    <small class="dont-index">Source: <a href="https://github.com/OHDSI/FeatureExtraction/blob/HEAD/R/GetCovariatesFromCohortAttributes.R" class="external-link"><code>R/GetCovariatesFromCohortAttributes.R</code></a></small>
    <div class="hidden name"><code>getDbCohortAttrCovariatesData.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Constructs covariates using the cohort_attribute table.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getDbCohortAttrCovariatesData</span><span class="op">(</span></span>
<span>  <span class="va">connection</span>,</span>
<span>  oracleTempSchema <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">cdmDatabaseSchema</span>,</span>
<span>  cohortTable <span class="op">=</span> <span class="st">"#cohort_person"</span>,</span>
<span>  cohortId <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>,</span>
<span>  cohortIds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>  cdmVersion <span class="op">=</span> <span class="st">"5"</span>,</span>
<span>  rowIdField <span class="op">=</span> <span class="st">"subject_id"</span>,</span>
<span>  <span class="va">covariateSettings</span>,</span>
<span>  aggregated <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  tempEmulationSchema <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>connection</dt>
<dd><p>A connection to the server containing the schema as created using the
<code>connect</code> function in the <code>DatabaseConnector</code> package.</p></dd>


<dt>oracleTempSchema</dt>
<dd><p>DEPRECATED: use <code>tempEmulationSchema</code> instead.</p></dd>


<dt>cdmDatabaseSchema</dt>
<dd><p>The name of the database schema that contains the OMOP CDM instance.
Requires read permissions to this database. On SQL Server, this should
specifiy both the database and the schema, so for example
'cdm_instance.dbo'.</p></dd>


<dt>cohortTable</dt>
<dd><p>Name of the table holding the cohort for which we want to construct
covariates. If it is a temp table, the name should have a hash prefix,
e.g. '#temp_table'. If it is a non-temp table, it should include the
database schema, e.g. 'cdm_database.cohort'.</p></dd>


<dt>cohortId</dt>
<dd><p>DEPRECATED:For which cohort ID should covariates be constructed? If set to -1,
covariates will be constructed for all cohorts in the specified cohort
table.</p></dd>


<dt>cohortIds</dt>
<dd><p>For which cohort ID(s) should covariates be constructed? If set to c(-1),
covariates will be constructed for all cohorts in the specified cohort
table.</p></dd>


<dt>cdmVersion</dt>
<dd><p>The version of the Common Data Model used. Currently only 
<code>cdmVersion = "5"</code> is supported.</p></dd>


<dt>rowIdField</dt>
<dd><p>The name of the field in the cohort temp table that is to be used as the
row_id field in the output table. This can be especially usefull if there
is more than one period per person.</p></dd>


<dt>covariateSettings</dt>
<dd><p>An object of type <code>covariateSettings</code> as created using the
<code><a href="createCohortAttrCovariateSettings.html">createCohortAttrCovariateSettings</a></code> function.</p></dd>


<dt>aggregated</dt>
<dd><p>Should aggregate statistics be computed instead of covariates per
cohort entry?</p></dd>


<dt>tempEmulationSchema</dt>
<dd><p>Some database platforms like Oracle and Impala do not truly support
temp tables. To emulate temp tables, provide a schema with write
privileges where temp tables can be created.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Returns an object of type <code>CovariateData</code>, which is an Andromeda object containing information on the baseline covariates.
Information about multiple outcomes can be captured at once for efficiency reasons. This object is
a list with the following components:</p><dl><dt>covariates</dt>
<dd><p>An ffdf object listing the
baseline covariates per person in the cohorts. This is done using a sparse representation:
covariates with a value of 0 are omitted to save space. The covariates object will have three
columns: rowId, covariateId, and covariateValue. The rowId is usually equal to the person_id,
unless specified otherwise in the rowIdField argument.</p></dd>
 <dt>covariateRef</dt>
<dd><p>A table
describing the covariates that have been extracted.</p></dd>
  
</dl><p>. The CovariateData object will also have a <code>metaData</code> attribute, a list of objects with
information on how the covariateData object was constructed.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function uses the data in the CDM to construct a large set of covariates for the provided
cohort. The cohort is assumed to be in an existing temp table with these fields: 'subject_id',
'cohort_definition_id', 'cohort_start_date'. Optionally, an extra field can be added containing the
unique identifier that will be used as rowID in the output. Typically, users don't call this
function directly but rather use the <code><a href="getDbCovariateData.html">getDbCovariateData</a></code> function instead.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="va">connectionDetails</span> <span class="op">&lt;-</span> <span class="fu">Eunomia</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/Eunomia/man/getEunomiaConnectionDetails.html" class="external-link">getEunomiaConnectionDetails</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">Eunomia</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/Eunomia/man/createCohorts.html" class="external-link">createCohorts</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  connectionDetails <span class="op">=</span> <span class="va">connectionDetails</span>,</span></span>
<span class="r-in"><span>  cdmDatabaseSchema <span class="op">=</span> <span class="st">"main"</span>,</span></span>
<span class="r-in"><span>  cohortDatabaseSchema <span class="op">=</span> <span class="st">"main"</span>,</span></span>
<span class="r-in"><span>  cohortTable <span class="op">=</span> <span class="st">"cohort"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cohorts created in table main.cohort</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   cohortId       name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        1  Celecoxib</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        2 Diclofenac</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        3    GiBleed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        4     NSAIDs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                                        description</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    A simplified cohort definition for new users of celecoxib, designed specifically for Eunomia.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    A simplified cohort definition for new users ofdiclofenac, designed specifically for Eunomia.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 A simplified cohort definition for gastrointestinal bleeding, designed specifically for Eunomia.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       A simplified cohort definition for new users of NSAIDs, designed specifically for Eunomia.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   count</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1844</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   850</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   479</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  2694</span>
<span class="r-in"><span><span class="va">connection</span> <span class="op">&lt;-</span> <span class="fu">DatabaseConnector</span><span class="fu">::</span><span class="fu"><a href="https://ohdsi.github.io/DatabaseConnector/reference/connect.html" class="external-link">connect</a></span><span class="op">(</span><span class="va">connectionDetails</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Connecting using SQLite driver</span>
<span class="r-in"><span><span class="va">covariateSettings</span> <span class="op">&lt;-</span> <span class="fu"><a href="createCohortAttrCovariateSettings.html">createCohortAttrCovariateSettings</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  attrDatabaseSchema <span class="op">=</span> <span class="st">"main"</span>,</span></span>
<span class="r-in"><span>  cohortAttrTable <span class="op">=</span> <span class="st">"cohort_attribute"</span>,</span></span>
<span class="r-in"><span>  attrDefinitionTable <span class="op">=</span> <span class="st">"attribute_definition"</span>,</span></span>
<span class="r-in"><span>  includeAttrIds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  isBinary <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  missingMeansZero <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">covData</span> <span class="op">&lt;-</span> <span class="fu">getDbCohortAttrCovariatesData</span><span class="op">(</span></span></span>
<span class="r-in"><span>  connection <span class="op">=</span> <span class="va">connection</span>,</span></span>
<span class="r-in"><span>  tempEmulationSchema <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>  cdmDatabaseSchema <span class="op">=</span> <span class="st">"main"</span>,</span></span>
<span class="r-in"><span>  cdmVersion <span class="op">=</span> <span class="st">"5"</span>,</span></span>
<span class="r-in"><span>  cohortTable <span class="op">=</span> <span class="st">"cohort"</span>,</span></span>
<span class="r-in"><span>  cohortIds <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  rowIdField <span class="op">=</span> <span class="st">"subject_id"</span>,</span></span>
<span class="r-in"><span>  covariateSettings <span class="op">=</span> <span class="va">covariateSettings</span>,</span></span>
<span class="r-in"><span>  aggregated <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Constructing covariates from cohort attributes table</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Inserting data took 0.0045 secs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Loading took 0.0251 secs</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Martijn Schuemie, Marc Suchard, Patrick Ryan, Jenna Reps, Anthony Sena, Ger Inberg.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

